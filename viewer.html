<!DOCTYPE html>
<html>
<head>
  <title>Viewer</title>
</head>
<body>
  <h2>Viewer (Receives Stream)</h2>
  <video id="viewerVideo" autoplay playsinline></video>

  <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
  <script>
    const peer = new Peer("viewer", {
      config: {
        iceServers: [
          { urls: "stun:stun.l.google.com:19302" }
        ]
      },
      debug: 3
    });

    peer.on("open", id => {
      console.log("Viewer peer open with ID:", id);
    });

    peer.on("call", call => {
  console.log("📞 Incoming call:", call);
  call.answer(); // No stream to send back

  call.on("stream", stream => {
    console.log("📺 Stream received");
    const video = document.getElementById("viewerVideo");
    video.srcObject = stream;
  });

  call.on("error", err => {
    console.error("❌ Call error:", err);
  });
});


    peer.on("error", err => console.error("Peer error:", err));
  </script>
</body>
</html>
