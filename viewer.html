<!DOCTYPE html>
<html>
<head>
  <title>Viewer</title>
</head>
<body>
  <h2>Viewer</h2>
  <video id="video" autoplay playsinline></video>

  <script src="https://cdn.jsdelivr.net/npm/peerjs@1.4.7/dist/peerjs.min.js"></script>
  <script>
    // Create Peer with fixed ID (for example: viewer1)
    const peer = new Peer('viewer1', {
      config: {
        iceServers: [{ urls: 'stun:stun.l.google.com:19302' }]
      }
    });

    peer.on('open', (id) => {
      console.log('Viewer peer ID:', id);
    });

    // Answer incoming call and display stream
    peer.on('call', call => {
      call.answer(); // no stream to send back
      call.on('stream', remoteStream => {
        const video = document.getElementById('video');
        video.srcObject = remoteStream;
      });
    });

    peer.on('error', err => {
      console.error(err);
    });
  </script>
</body>
</html>
